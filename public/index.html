<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Bot Controller</title>
    <!-- <link rel="stylesheet" type="text/css" href="prompt-boxes.css" /> -->
    <link rel="stylesheet" type="text/css" href="output.css" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <script src="socket.io.js"></script>
    <script src="BotUI.js"></script>
    <script src="Controller.js"></script>
    <script src="sha512.js"></script>
    <script src="prompt-boxes.js"></script>
  </head>
  <body class="text-slate-500 dark:text-slate-400 bg-white dark:bg-slate-900">
    <div class="flex flex-col justify-center ml-3">
      <input
        type="checkbox"
        id="light-switch"
        name="light-switch"
        class="light-switch sr-only"
      />
      <label class="relative cursor-pointer p-2" for="light-switch">
        <svg
          class="dark:hidden"
          width="16"
          height="16"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            class="fill-slate-300"
            d="M7 0h2v2H7zM12.88 1.637l1.414 1.415-1.415 1.413-1.413-1.414zM14 7h2v2h-2zM12.95 14.433l-1.414-1.413 1.413-1.415 1.415 1.414zM7 14h2v2H7zM2.98 14.364l-1.413-1.415 1.414-1.414 1.414 1.415zM0 7h2v2H0zM3.05 1.706 4.463 3.12 3.05 4.535 1.636 3.12z"
          />
          <path
            class="fill-slate-400"
            d="M8 4C5.8 4 4 5.8 4 8s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4Z"
          />
        </svg>
        <svg
          class="hidden dark:block"
          width="16"
          height="16"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            class="fill-slate-400"
            d="M6.2 1C3.2 1.8 1 4.6 1 7.9 1 11.8 4.2 15 8.1 15c3.3 0 6-2.2 6.9-5.2C9.7 11.2 4.8 6.3 6.2 1Z"
          />
          <path
            class="fill-slate-500"
            d="M12.5 5a.625.625 0 0 1-.625-.625 1.252 1.252 0 0 0-1.25-1.25.625.625 0 1 1 0-1.25 1.252 1.252 0 0 0 1.25-1.25.625.625 0 1 1 1.25 0c.001.69.56 1.249 1.25 1.25a.625.625 0 1 1 0 1.25c-.69.001-1.249.56-1.25 1.25A.625.625 0 0 1 12.5 5Z"
          />
        </svg>
        <span class="sr-only">Switch to light / dark version</span>
      </label>
    </div>
    <div class="botUIContainer flex flex-row"></div>
  </body>
  <script type="application/javascript">
    // https://tailwindcss.com/docs/dark-mode#toggling-dark-mode-manually

    // On page load or when changing themes, best to add inline in `head` to avoid FOUC
    if (
      localStorage.theme === "dark" ||
      (!("theme" in localStorage) &&
        window.matchMedia("(prefers-color-scheme: dark)").matches)
    ) {
      document.documentElement.classList.add("dark");
    } else {
      document.documentElement.classList.remove("dark");
    }

    // Handle switching
    const lightSwitches = document.querySelectorAll(".light-switch");

    if (lightSwitches.length > 0) {
      lightSwitches.forEach((lightSwitch, i) => {
        if (
          localStorage.theme === "dark" ||
          (!("theme" in localStorage) &&
            window.matchMedia("(prefers-color-scheme: dark)").matches)
        ) {
          lightSwitch.checked = true;
        }

        lightSwitch.addEventListener("change", () => {
          const { checked } = lightSwitch;
          lightSwitches.forEach((el, n) => {
            if (n !== i) {
              el.checked = checked;
            }
          });

          if (lightSwitch.checked) {
            document.documentElement.classList.add("dark");
            localStorage.theme = "dark";
          } else {
            document.documentElement.classList.remove("dark");
            localStorage.theme = "light";
          }
        });
      });
    }

    // TODO: Add a little settings cogwheel somewhere
    // // Whenever the user explicitly chooses light mode
    // localStorage.theme = "light";

    // // Whenever the user explicitly chooses dark mode
    // localStorage.theme = "dark";

    // // Whenever the user explicitly chooses to respect the OS preference
    // localStorage.removeItem("theme");

    var pb = new PromptBoxes({
      // top or bottom
      toastDir: "top",
      // max number of toasts to display
      toastMax: 5,
      // auto dismiess after 5 seconds
      // 0 = never
      toastDuration: 5000,
      // is dissmissable
      toastClose: false,
      // shows prompt as position absolute
      promptAsAbsolute: true,
      // animation speed
      animationSpeed: 500,
    });
    var controller = new Controller();
    controller.start();
  </script>
</html>
